name: Rollback

on:
  workflow_dispatch:
    inputs:
      revision:
        description: "Helm revision number to rollback to"
        required: true
        type: string

jobs:
  rollback:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Rollback Helm release
        run: |
          echo "Rolling back todo-app to revision ${{ github.event.inputs.revision }}..."
          echo "Configure KUBECONFIG secret to enable rollback."
          echo ""
          echo "Manual command:"
          echo "  helm rollback todo-app ${{ github.event.inputs.revision }} --namespace todo-app --wait"
